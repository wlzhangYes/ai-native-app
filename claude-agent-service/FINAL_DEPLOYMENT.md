# ğŸš€ æœ€ç»ˆéƒ¨ç½²æŒ‡å—

## æœ€æ–°åŠŸèƒ½

### âœ… å·²å®Œæˆçš„æ‰€æœ‰åŠŸèƒ½

1. **æ–‡ä»¶æµè§ˆå™¨** - æŸ¥çœ‹å’Œé¢„è§ˆå·¥ä½œç©ºé—´æ–‡ä»¶
2. **Todo åˆ—è¡¨** - å®æ—¶ç›‘æ§ä»»åŠ¡è¿›åº¦
3. **AI æ€è€ƒåŠ¨ç”»** - æ©™è‰²è·³åŠ¨ç‚¹
4. **å·¥å…·è°ƒç”¨å®Œæ•´å†å²** - ä¿å­˜å¹¶æ˜¾ç¤ºæ‰€æœ‰å·¥å…·æ‰§è¡Œè¿‡ç¨‹
5. **æ¶ˆæ¯æŒä¹…åŒ–** - æ•°æ®åº“å­˜å‚¨å¯¹è¯å†å²
6. **ä¼šè¯å†å²åŠ è½½** - åˆ‡æ¢ä¼šè¯è‡ªåŠ¨åŠ è½½å†å²æ¶ˆæ¯
7. **ä¾§è¾¹æ å¸ƒå±€ä¿®å¤** - ä¸å†æ¶ˆå¤±
8. **æ–‡æœ¬æ¸²æŸ“ä¿®å¤** - ä½¿ç”¨ ref é¿å…é—­åŒ…é—®é¢˜

## ğŸ“¦ éƒ¨ç½²æ­¥éª¤

### 1. æ‹‰å–æœ€æ–°ä»£ç 

```bash
cd claude-agent-service
git pull
```

### 2. è¿è¡Œæ•°æ®åº“è¿ç§»

```bash
# éå¸¸é‡è¦!æ·»åŠ äº† tool_calls åˆ—
docker-compose exec backend alembic upgrade head

# æˆ–è€…åœ¨æœ¬åœ°
cd backend
alembic upgrade head
```

### 3. é‡æ–°æ„å»ºæœåŠ¡

```bash
# åç«¯(æ·»åŠ äº†æ–‡ä»¶ API)
docker-compose build backend

# å‰ç«¯(ä¿®å¤äº†æ¸²æŸ“å’Œæ·»åŠ äº†åŠŸèƒ½)
docker-compose build frontend
```

### 4. é‡å¯æ‰€æœ‰æœåŠ¡

```bash
docker-compose down
docker-compose up -d
```

### 5. éªŒè¯éƒ¨ç½²

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps

# åº”è¯¥éƒ½æ˜¯ healthy:
# âœ“ postgres (healthy)
# âœ“ redis (healthy)
# âœ“ backend (healthy)
# âœ“ frontend (healthy)

# æµ‹è¯• API
curl http://172.16.18.184:8000/health
curl http://172.16.18.184:3000
```

## ğŸ§ª åŠŸèƒ½æµ‹è¯•

### æµ‹è¯• 1: æ–‡æœ¬æ¸²æŸ“

1. è®¿é—® http://172.16.18.184:3000
2. åˆ›å»ºæ–°ä¼šè¯
3. å‘é€æ¶ˆæ¯: "ä½ å¥½"
4. æ‰“å¼€æµè§ˆå™¨ Console (F12)
5. åº”è¯¥çœ‹åˆ°:
   ```
   [Result] Got text: ä½ å¥½!æˆ‘æ˜¯ Claude...
   [Done] fullResultTextRef: ä½ å¥½!æˆ‘æ˜¯ Claude...
   [ChatPanel] Messages updated: 2
   ```
6. é¡µé¢åº”è¯¥æ˜¾ç¤º Claude çš„å›å¤

### æµ‹è¯• 2: å·¥å…·è°ƒç”¨

1. å‘é€æ¶ˆæ¯: "å¸®æˆ‘åˆ›å»ºä¸€ä¸ª hello.txt æ–‡ä»¶"
2. åº”è¯¥çœ‹åˆ°:
   - AI æ€è€ƒåŠ¨ç”»(è·³åŠ¨çš„ç‚¹)
   - å·¥å…·è°ƒç”¨å¡ç‰‡: Write
   - çŠ¶æ€å˜åŒ–: Building â†’ Executing â†’ Success
   - å·¥å…·ç»“æœæ˜¾ç¤º

### æµ‹è¯• 3: å†å²åŠ è½½

1. åˆ·æ–°é¡µé¢
2. ç‚¹å‡»ä¹‹å‰çš„ä¼šè¯
3. åº”è¯¥èƒ½çœ‹åˆ°å†å²æ¶ˆæ¯(åŒ…æ‹¬å·¥å…·è°ƒç”¨)

### æµ‹è¯• 4: æ–‡ä»¶æµè§ˆ

1. ç‚¹å‡»å³ä¾§ "Files" æ ‡ç­¾
2. åº”è¯¥çœ‹åˆ°å·¥ä½œç©ºé—´æ–‡ä»¶åˆ—è¡¨
3. ç‚¹å‡»æ–‡ä»¶æŸ¥çœ‹å†…å®¹

### æµ‹è¯• 5: Todo ç›‘æ§

1. å‘é€æ¶ˆæ¯: "å¸®æˆ‘é‡æ„è¿™ä¸ªé¡¹ç›®,ä½¿ç”¨ MVC æ¶æ„"
2. å³ä¾§ "Todos" æ ‡ç­¾åº”è¯¥æ˜¾ç¤ºä»»åŠ¡åˆ—è¡¨
3. çœ‹åˆ°è¿›åº¦æ¡å’ŒçŠ¶æ€å›¾æ ‡

## ğŸ› å¦‚æœè¿˜æœ‰é—®é¢˜

### é—®é¢˜: æ–‡æœ¬è¿˜æ˜¯ä¸æ˜¾ç¤º

æŸ¥çœ‹ Console è¾“å‡º:
- å¦‚æœæ²¡æœ‰ `[Result] Got text`,è¯´æ˜åç«¯æ²¡å‘é€ result äº‹ä»¶
- å¦‚æœæœ‰ä½† ref æ˜¯ç©ºçš„,è¯´æ˜äº‹ä»¶å¤„ç†æœ‰é—®é¢˜
- æŠŠå®Œæ•´ Console æ—¥å¿—å‘ç»™æˆ‘

### é—®é¢˜: å·¥å…·è°ƒç”¨æ²¡æœ‰ç»“æœ

æ£€æŸ¥:
- Console æ˜¯å¦æœ‰ `tool_result` äº‹ä»¶
- æ•°æ®åº“ `conversations.tool_calls` æ˜¯å¦æœ‰æ•°æ®

### é—®é¢˜: å†å²åŠ è½½å¤±è´¥

```bash
# æ£€æŸ¥åç«¯æ—¥å¿—
docker-compose logs backend | grep messages

# æµ‹è¯• API
curl http://172.16.18.184:8000/api/sessions/{session_id}/messages
```

## ğŸ“Š Git æäº¤å†å²

```
68e1599 - fix: Add missing Optional import âœ“
d5efde6 - feat: Store and load tool calls âœ“
074566a - fix: Prevent sidebar disappearing âœ“
[ä¹‹å‰çš„æäº¤...]
```

## ğŸ¯ å…³é”®æ–‡ä»¶

### åç«¯
- `backend/app/api/files.py` - æ–‡ä»¶ API(æ–°å¢)
- `backend/app/api/sessions.py` - å†å²æ¶ˆæ¯ API(ä¿®æ”¹)
- `backend/app/api/chat.py` - ä¿å­˜å·¥å…·è°ƒç”¨(ä¿®æ”¹)
- `backend/app/models/conversation.py` - æ·»åŠ  tool_calls åˆ—(ä¿®æ”¹)

### å‰ç«¯
- `frontend/src/hooks/useChatStream.ts` - ä¿®å¤æ–‡æœ¬æ¸²æŸ“(ä¿®æ”¹)
- `frontend/src/components/ChatPanel.tsx` - AI åŠ¨ç”»(ä¿®æ”¹)
- `frontend/src/components/FileExplorer.tsx` - æ–‡ä»¶æµè§ˆ(å¢å¼º)
- `frontend/src/app/page.tsx` - å¸ƒå±€ä¿®å¤(ä¿®æ”¹)

## âœ¨ æ€»ç»“

æ‰€æœ‰è¯·æ±‚çš„åŠŸèƒ½å·²å®Œæˆ:
- âœ… æ–‡ä»¶é¢„è§ˆ
- âœ… Todo æ˜¾ç¤º
- âœ… AI æ€è€ƒåŠ¨ç”»
- âœ… å·¥å…·è°ƒç”¨å®Œæ•´å†å²
- âœ… æ¶ˆæ¯æŒä¹…åŒ–
- âœ… ä¼šè¯å†å²åŠ è½½
- âœ… å¸ƒå±€ä¿®å¤

**è¯·åœ¨æµ‹è¯•æœåŠ¡å™¨ä¸Šè¿è¡Œæ•°æ®åº“è¿ç§»å¹¶é‡æ–°æ„å»ºéƒ¨ç½²!** ğŸŠ
